#include <iostream>
#include <cstdlib>

using namespace std;

int main(int argc, char *argv[]) {
    if (argc != 5 || strcmp(argv[3], "--command") != 0) {
        cout << "Usage: " << argv[0] << " <IP_Address> <Port> --command <command>" << endl;
        return 1;
    }

    // Extract IP address, port, and command from command line arguments
    char ipAddress[16];
    char port[6];
    char command[256];

    strncpy(ipAddress, argv[1], sizeof(ipAddress));
    strncpy(port, argv[2], sizeof(port));
    strncpy(command, argv[4], sizeof(command));

    // Construct the SSH command
    string sshCommand = "ssh -p ";
    sshCommand += port;
    sshCommand += " ";
    sshCommand += ipAddress;
    sshCommand += " \"";
    sshCommand += command;
    sshCommand += "\"";

    // Execute the SSH command
    int result = system(sshCommand.c_str());

    if (result == 0) {
        cout << "Command executed successfully." << endl;
    } else {
        cerr << "Failed to execute command." << endl;
        return 1;
    }

    return 0;
}
